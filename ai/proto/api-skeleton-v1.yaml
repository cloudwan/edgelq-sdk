name: ai.edgelq.com
proto:
  package:
    name: ntt.ai
    currentVersion: v1
    goPackage: github.com/cloudwan/edgelq/ai
    protoImportPathPrefix: edgelq/ai/proto
  service:
    name: AI
    defaultHost: ai.edgelq.com
    oauthScopes: https://apis.edgelq.com

imports:
- iam.edgelq.com
- secrets.edgelq.com

resources:
- name: ChatModel
  parents:
  - iam.edgelq.com/Project
  - ""

- name: SearchDb
  parents:
  - iam.edgelq.com/Project
  - ""

- name: SearchIndex
  plural: SearchIndices
  parents:
  - SearchDb

- name: Document
  multiRegion:
    syncType: NEVER
  parents:
  - SearchIndex

- name: Connector
  parents:
  - iam.edgelq.com/Project
  - ""

- name: CapabilityTemplate
  parents:
  - iam.edgelq.com/Project
  - ""
  actions:
  - name: PreviewTemplateTools
    verb: previewTools
    opResourceInfo:
      isCollection: false
      isPlural: false
    withStoreHandle:
      readOnly: true
      transaction: NONE
    multiRegionRouting:
      skipCodeGenBasedRouting: true

- name: Conversation
  parents:
  - iam.edgelq.com/Project
  - iam.edgelq.com/User

apis:
- name: Chat
  actions:
  - name: Completion
    streamingRequest: true
    streamingResponse: true
    multiRegionRouting:
      skipCodeGenBasedRouting: true
    withStoreHandle:
      transaction: NONE
      readOnly: true

- name: Responses
  actions:
  - name: CreateResponse
    verb: createResponse
    streamingRequest: false
    streamingResponse: true
    responseName: CreateResponseResult
    skipResponseMsgGen: true
    multiRegionRouting:
      skipCodeGenBasedRouting: true
    withStoreHandle:
      transaction: MANUAL

- name: Tools
  actions:
  - name: ExecuteTools
    verb: executeTools
    multiRegionRouting:
      skipCodeGenBasedRouting: true
    withStoreHandle:
      transaction: MANUAL
