syntax = "proto3";

package ntt.devices.v1alpha2;

import "edgelq-sdk/common/api/credentials.proto";
import "edgelq-sdk/devices/proto/v1alpha2/device.proto";
import "edgelq-sdk/devices/proto/v1alpha2/device_change.proto";

option go_package = "github.com/cloudwan/edgelq-sdk/devices/client/v1alpha2/device;device_client";
option java_multiple_files = false;
option java_outer_classname = "DeviceCustomProto";
option java_package = "com.ntt.devices.pb.v1alpha2";

// Request message for method
// [ProvisionServiceAccountToDevice][ntt.devices.v1alpha2.ProvisionServiceAccountToDevice]
message ProvisionServiceAccountToDeviceRequest {
  // Name of Device to provision service account.
  // This method automatically generates a service account and a key for the
  // device and assign the key to .Spec.ServiceAccount
  string name = 1;

  // external public key to use for service account for this device.
  // If not present, a keypair will be generated by the server.
  string external_pubkey = 2;
}

// Response message for method
// [ProvisionServiceAccountToDevice][ntt.devices.v1alpha2.ProvisionServiceAccountToDevice]
message ProvisionServiceAccountToDeviceResponse {
  // The service account generated by the endpoint. Save the private key
  // included.
  ntt.api.ServiceAccount service_account = 1;
}

// Request message for method
// [RemoveServiceAccountFromDevice][ntt.devices.v1alpha2.RemoveServiceAccountFromDevice]
message RemoveServiceAccountFromDeviceRequest {
  // Name of the Device to remove its service account
  // The service account and the key will be automatically deleted as well when
  // they have been generated automatically by `ProvisionServiceAccountToDevice`
  // action. Otherwise, the service account will be kept intact. The device will
  // lost the access to the resources in the project.
  string name = 1;
}

// Response message for method
// [RemoveServiceAccountFromDevice][ntt.devices.v1alpha2.RemoveServiceAccountFromDevice]
message RemoveServiceAccountFromDeviceResponse {
}
